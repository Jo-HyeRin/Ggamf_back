package shop.ggamf.ggamf.domain.gameCode;

import java.util.ArrayList;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.Query;

import org.qlrm.mapper.JpaResultMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository
public class GameCodeRepositoryQuery {

    @Autowired
    private EntityManager em;

    // private final Logger log = LoggerFactory.getLogger(getClass());

    public List<GameListRespDto> findGameCodeList() {
        StringBuffer sb = new StringBuffer();
        sb.append("SELECT logo, game_name from game_code");

        Query query = em.createNativeQuery(sb.toString());

        JpaResultMapper result = new JpaResultMapper();
        try {
            List<GameListRespDto> gameListRespDto = result.list(query, GameListRespDto.class);
        return gameListRespDto;
            
        } catch (NoResultException e) {
            List<GameListRespDto> gameListRespDto = new ArrayList<>();
            return gameListRespDto;
        }
        
    }

}
